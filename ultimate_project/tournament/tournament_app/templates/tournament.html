{% load static %}

<div style="display:none;">

    <head>
        <link rel="stylesheet" href="{% static 'tournament/styles.css' %}">
        <script>
            window.rasp = "{{ rasp }}";
            window.pidom = "{{ pidom }}";
            window.selfId = "{{ user_id }}";
            window.selfName = "{{ user_name }}";							
        </script>
        <script src="{% static 'tournament/tournament.js' %}" onload="initTournament()"></script>
    </head>
</div>

<div class="container-fluid m-0">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-0 col-sm-4 col-md-3 col-lg-3 col-xl-2 d-none d-sm-block bg-light p-3 shadow-sm" style="min-height: 75vh; position: sticky; top: 0; overflow-y: auto;">
            <div class="sidebar-sticky text-center">
                <!-- Account Settings Title -->
                <h1 class="mb-3 text-gray-800 pt-2"><strong>Tournament</strong></h1>
                <ul class="nav flex-column pt-5">
                    <!-- Profile Section -->
                    <li class="nav-item mb-3">
                        <a id="side-nav-home" class="nav-link btn btn-outline-primary btn-sm rounded-pill w-100 d-flex align-items-center justify-content-center sidebar-btn"                            hx-get="/home/" hx-target="#main_div" hx-swap="innerHTML"
                            hx-push-url="true">
                            <i class="mr-2 fa-solid fa-table-tennis-paddle-ball"></i><h5>Home</h5>
                        </a>
                    </li>
                    <li class="nav-item mb-3">
                        <a id="side-nav-tournament" class="nav-link btn btn-outline-primary btn-sm rounded-pill w-100 d-flex align-items-center justify-content-center sidebar-btn"                            hx-get="/tournament/simple-match/" hx-target="#main_div" hx-swap="innerHTML"
                            hx-push-url="true">
                            <i class="mr-2 fa-solid fa-table-tennis-paddle-ball"></i><h5>Tournament</h5>
                        </a>
                    </li>
                    <li  id="side-nav-info" class="nav-item mb-3">
                        <div id="overlayButton" onclick="replayTuto()"
                            class="nav-link btn btn-outline-primary rounded-pill w-100 d-flex align-items-center justify-content-center sidebar-btn">
                            <i class="mr-2 fas fa-info-circle"></i><h5>Info</h5>
                    </div>
                    </li>
                </ul>
            </div>
        </nav>
        <a class="tuto-overlay" id="tuto-overlay">
            <div class="tuto-box">
                <img src="https://dansylvain.github.io/pictures/SylvainDurifOmbaya.webp"
                    alt="Tutoriel" />
                    <button onclick="document.getElementById('tuto-overlay').style.display='none'" class="btn btn-danger mt-3">Fermer</button>
                <p>Clique ici pour d√©marrer un match !</p>
            </div>
        </a>
        <!-- Main Content -->
        <main role="main" class="col-12 col-md-9 col-sm-8 ml-sm-auto col-lg-9 col-xl-10 p-0 m-0">
            <!-- Content dynamically loaded here -->
            <div id="account-content">
                <div id="simple-selections">
                    <div class="row d-flex pt-5">
                        <div class="col-lg-2 d-flex flex-column pt-5"></div>
                        <div class="col-lg-4">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 text-center font-weight-bold text-primary">Player pool</h6>
                                </div>
                                <div class="card-header py-3">
                                    <div class="d-flex flex-column gap-2">
                                        <input class="form-control border-0 w-100" id="player-name" type="text"
                                            maxlength="20" pattern=".{1,50}" required placeholder="enter a name"
                                            oninput="this.value = this.value.replace(/[^a-zA-Z0-9_]/g, '');" />
                                        <button onclick="newPlayer(window.tournamentSocket); prefillName();"
                                            class="btn btn-primary d-flex align-items-center justify-content-between w-100">
                                            <span class="text">Add Player</span>
                                            <span class="icon text-white-50">
                                                <i class="fas fa-arrow-right"></i>
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 d-flex flex-column">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 text-center font-weight-bold text-primary">Tournament</h6>
                                </div>
                            </div>
                            <div class="d-sm-none card shadow">
                                <div class="card-header py-3">
                                    <div id="overlayButton" onclick="replayTuto()"
                                    class="nav-link btn btn-outline-primary btn-sm rounded-pill w-100 d-flex align-items-center justify-content-center sidebar-btn">
                                        <i class="fas fa-info-circle"></i>INFO
                                    </div>
                                </div>
                            </div>
                            <div class="p-2 card shadow">
                                <a id="switch2d3d" class="font-weight-bold  nav-link btn btn-outline-primary btn-sm rounded-pill w-100 d-flex align-items-center justify-content-center sidebar-btn">
                                    <span class="mr-2">2D</span>
                                    <label for="dim" class="switch">
                                        <input type="checkbox" id="dim" hidden>
                                        <span class="slider"></span>
                                    </label>
                                    <span class="ml-2">3D</span>
                                </a>
                            </div>

                            <div class="card shadow">
                                <div class="card-header py-2 d-flex justify-content-center align-items-center gap-2">
                                    <button onclick="newTournament(window.tournamentSocket)"
                                        class="w-100 btn btn-primary d-flex align-items-center justify-content-between">
                                        <span class="text">Create Tournament</span>
                                        <span class="icon text-white-50">
                                            <i class="fas fa-arrow-right"></i>
                                        </span>
                                    </button>

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 d-flex flex-column"></div>
                    </div>
                    <div class="row d-flex align-items-stretch">
                        <div class="col-lg-2 d-flex flex-column"></div>
                        <div class="col-lg-4 mb-4">
                            <div class="card shadow h-100">
                                <div id="players" class="card-body p-2">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 mb-4">
                            <div class="card shadow mb-4 h-100">
                                <div class="card-body">
                                    <div id="tournaments">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 d-flex flex-column"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
<script>
    if (typeof dim === 'undefined') {
        const dim = document.getElementById('dim');
    }
    Object.defineProperty(dim, 'value', {
        get() {
            return dim.checked ? '3' : '2';
        }
    });
</script>
<!-- Add FontAwesome Icons -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="{% static 'tournament/tuto-overlay.js' %}"></script>
<script src="{% static 'tournament/name-generator.js' %}"></script>