{% load static %}
<script src="https://kit.fontawesome.com/3dd39fb56b.js" crossorigin="anonymous"></script>
<script src="{% static 'static_files/translations.js' %}"></script>
<script src="https://unpkg.com/htmx.org@1.9.6"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
<script src="{% static 'static_files/vendor/jquery/jquery.min.js' %}"></script>
<script src="{% static 'static_files/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'static_files/vendor/jquery-easing/jquery.easing.min.js' %}"></script>
<script src="{% static 'static_files/js/sb-admin-2.min.js' %}"></script>
<script>
        // Fonction pour mettre à jour l'état de la navbar et de la sidebar
    function updateLayout() {
        const url = window.location.href;
        // Vérifie si on est sur la page d'accueil
        if (url.includes('/home')) {
            toggleNavbar(false); // Masquer la navbar si on est sur la home
            toggleSidebar(false); // Masquer la sidebar si on est sur la home
        } else {
            toggleNavbar(true); // Sinon, afficher la navbar
            toggleSidebar(true); // Et afficher la sidebar
        }
    }

    // Appel de updateLayout pour définir l'état initial
    updateLayout();

    // Ajout de l'écouteur pour l'événement popstate (quand l'utilisateur utilise les flèches de navigation)
    window.addEventListener('popstate', function(event) {
        console.log('Navigating using browser history');
        updateLayout(); // Réapplique les changements de layout à chaque changement d'état
    });
    function toggleNavbar(show) {
        const navbar = document.querySelector('#homelogo');
        console.log("toggleNavbar called");
        if (show) {
            navbar.classList.remove('d-none');
            navbar.classList.add('d-flex');
        } else {
            navbar.classList.remove('d-flex');
            navbar.classList.add('d-none');
        }
    }

    function toggleSidebar(show) {
        console.log("toggleSidebar called");
        const sidebar = document.querySelector('#accordionSidebar');
        if (show) {
            sidebar.classList.remove('d-none');
        } else {
            sidebar.classList.add('d-none');
        }
    }
</script>